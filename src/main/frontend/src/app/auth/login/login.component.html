<nb-layout>
  <nb-layout-column>
<nb-card>
  <nb-card-header><h1 id="title" class="title">Login</h1></nb-card-header>
  <nb-card-body>
    <p class="sub-title">Hello! Log in with your username.</p>

    <nb-alert *ngIf="isLoginFailed" outline="danger" role="alert">
      <p class="alert-title"><b>Oh snap!</b></p>
      <ul class="alert-message-list">
        <li class="alert-message">{{ errorMessage }}</li>
      </ul>
    </nb-alert>

    <nb-alert *ngIf="isLoggedIn && !submitted" outline="success" role="alert">
      <p class="alert-title"><b>Hooray!</b></p>
      <ul class="alert-message-list">
        <li class="alert-message">Logged in as {{ roles }}.</li>
      </ul>
    </nb-alert>

    <form (ngSubmit)="onSubmit()" [formGroup]="form" aria-labelledby="title">

      <div class="form-control-group">
        <label class="label" for="username">Username:</label>
        <input
          id="username"
          type="text"
          formControlName="username"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f.username.errors }">

        <ng-container *ngIf="f.username.invalid && f.username.touched">
          <p class="caption status-danger" *ngIf="f.username.errors?.required">
            Username is required!
          </p>
        </ng-container>
      </div>

      <div class="form-control-group">
        <label class="label" for="password">Password:</label>
        <input
          id="password"
          type="password"
          formControlName="password"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
        <ng-container *ngIf="f.password.invalid && f.password.touched ">
          <p class="caption status-danger" *ngIf="f.password.errors?.required">
            Password is required!
          </p>
          <p class="caption status-danger" *ngIf="f.password.errors?.minlength || f.password.errors?.maxlength">
            Password should contain at least 6 characters
          </p>
        </ng-container>
      </div>

      <button
        type="submit"
        nbButton
        [disabled]="submitted || !form.valid"
        [class.btn-pulse]="submitted">
        Log In
      </button>
      <button type="submit" nbButton>Submit</button>
      <button
        type="button"
        (click)="onReset()"
        class="btn btn-warning float-right"
      >
        Reset
      </button>
    </form>

  </nb-card-body>
</nb-card>
      </nb-layout-column>
</nb-layout>
